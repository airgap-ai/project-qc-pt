# 实现计划: 项目质控助手流程优化前端

## 概述

本实现计划基于 0126 版流程图,在现有前端基础上新增文档上传与同步、四大结构化内容模块、合规性检查、数据比对和预警管理等功能。采用原生 HTML + Tailwind CSS 技术栈,与现有前端保持一致。

## 任务

- [x] 1. 创建文档上传与同步页面
  - 创建 `frontend/document-upload.html` 页面
  - 实现文档上传区域(拖拽上传和点击上传)
  - 实现"从生产管理系统同步"按钮
  - 实现文件格式验证(Excel、Word、PDF)
  - 实现文件大小验证(50MB 限制)
  - 实现上传进度显示
  - 实现文档列表展示(显示文件名、大小、来源、状态)
  - 实现文档类型标签选择(立项/招标/合同)
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.6, 1.7, 1.8, 1.9, 1.10, 1.11, 1.12, 1.13, 1.14, 1.15_

- [ ]* 1.1 编写文件格式验证属性测试
  - **属性 1: 文件格式验证**
  - **验证: 需求 1.1, 1.8**

- [ ]* 1.2 编写文件大小限制属性测试
  - **属性 2: 文件大小限制**
  - **验证: 需求 1.9**

- [x] 2. 创建结构化内容展示页面
  - [x] 2.1 创建页面框架和标签页导航
    - 创建 `frontend/structured-content.html` 页面
    - 实现标签页导航(项目金额与付款、项目进度、交付成果、人员要求)
    - 实现标签页切换逻辑
    - _需求: 2.1, 3.1, 4.1, 5.1_

  - [x] 2.2 实现项目金额与付款模块
    - 实现基本金额信息展示(含税价格、税率、不含税价格、增值税)
    - 实现付款条件列表展示
    - 实现数据来源标注
    - 实现字段编辑功能
    - 实现置信度指示器
    - _需求: 2.2, 2.3, 2.4, 2.8, 2.9, 2.10_

  - [ ]* 2.3 编写数据来源优先级属性测试
    - **属性 3: 数据来源优先级**
    - **验证: 需求 2.5, 2.6**

  - [ ]* 2.4 编写数据来源标注完整性属性测试
    - **属性 4: 数据来源标注完整性**
    - **验证: 需求 2.8**

  - [x] 2.5 实现项目进度模块
    - 实现时间节点展示(项目开始、需求调研、开发上线、试运行、初验、终验、运维)
    - 实现时间轴可视化
    - 实现时间节点手动调整功能
    - 实现数据来源标注
    - _需求: 3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.8, 3.9, 3.10, 3.11, 3.12_

  - [x] 2.6 实现交付成果模块
    - 实现按阶段分组展示交付物
    - 实现交付物列表展示(名称、要求描述、状态)
    - 实现交付物添加、编辑、删除功能
    - 实现交付物文件上传
    - 实现交付物状态标记
    - 实现导出交付物清单功能
    - _需求: 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9, 4.10_

  - [ ]* 2.7 编写交付物分组正确性属性测试
    - **属性 5: 交付物分组正确性**
    - **验证: 需求 4.2**

  - [ ]* 2.8 编写 CRUD 操作一致性属性测试
    - **属性 6: CRUD 操作一致性**
    - **验证: 需求 4.6**

  - [x] 2.9 实现人员要求模块
    - 实现人员要求展示(项目经理资质、业绩、驻场人员、运维人员、证明材料)
    - 实现实际人员配置展示
    - 实现要求与实际配置对比
    - 实现差异标注
    - 实现人员要求编辑功能
    - _需求: 5.2, 5.3, 5.4, 5.5, 5.6, 5.7, 5.8, 5.9, 5.10_

  - [ ]* 2.10 编写人员配置差异标注属性测试
    - **属性 7: 人员配置差异标注**
    - **验证: 需求 5.10**

- [x] 3. 创建合规性检查页面
  - 创建 `frontend/compliance-check.html` 页面
  - 实现统计卡片(检查项总数、通过项、问题项)
  - 实现问题列表展示
  - 实现问题项红色高亮显示
  - 实现问题详情展示(招标文件内容 vs 合同文件内容)
  - 实现"标记为已知"和"去校验"操作按钮
  - 实现问题统计功能
  - 实现导出合规性检查报告功能
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8, 6.9, 6.10_

- [ ]* 3.1 编写合规性检查一致性属性测试
  - **属性 8: 合规性检查一致性**
  - **验证: 需求 6.2**

- [ ]* 3.2 编写问题项高亮显示属性测试
  - **属性 9: 问题项高亮显示**
  - **验证: 需求 6.6**

- [ ]* 3.3 编写问题统计准确性属性测试
  - **属性 10: 问题统计准确性**
  - **验证: 需求 6.9**

- [x] 4. 优化人工校验修正界面
  - 在现有 `frontend/hitl-workbench.html` 基础上优化
  - 实现问题字段高亮显示
  - 实现修改后自动标记"已人工校验"
  - 实现修改历史记录功能
  - 实现"确认无误"和"需要重新提取"操作
  - 实现修正完成后自动更新合规性检查结果
  - _需求: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7, 7.8, 7.9, 7.10_

- [ ]* 4.1 编写修改标记自动更新属性测试
  - **属性 11: 修改标记自动更新**
  - **验证: 需求 7.5**

- [ ]* 4.2 编写修改历史记录完整性属性测试
  - **属性 12: 修改历史记录完整性**
  - **验证: 需求 7.6**

- [x] 5. 创建数据比对结果页面
  - [x] 5.1 创建页面框架和四个比对卡片
    - 创建 `frontend/data-comparison.html` 页面
    - 实现网格布局(2x2)
    - 创建四个卡片容器
    - _需求: 8.1_

  - [x] 5.2 实现项目金额与付款比对卡片
    - 实现价格税率一致性显示
    - 实现付款进度状态显示(正常/材料不齐/通过未付款/已付款超期)
    - 实现付款预警时限设置
    - 实现付款详情展示
    - _需求: 8.2, 8.3, 8.4, 8.5_

  - [ ]* 5.3 编写价格税率一致性检查属性测试
    - **属性 13: 价格税率一致性检查**
    - **验证: 需求 8.3**

  - [x] 5.4 实现项目进度对比卡片
    - 实现阶段进度状态显示(正常/超过约定期限)
    - 实现交付物归档预警时限设置
    - 实现进度详情展示
    - _需求: 8.6, 8.7, 8.8_

  - [x] 5.5 实现交付成果比对卡片
    - 实现交付物完整性检查(齐全/不齐全)
    - 实现交付物清单展示
    - 实现缺失交付物标注
    - 实现映射关系建立功能
    - _需求: 8.9, 8.10, 8.11, 8.12_

  - [x] 5.6 实现人员要求比对卡片
    - 实现驻场人员数量达标检查
    - 实现项目人员一致性检查
    - 实现运维人员数量达标检查
    - 实现人员差异详情展示
    - _需求: 8.13, 8.14, 8.15, 8.16, 8.17_

  - [ ]* 5.7 编写人员数量达标检查属性测试
    - **属性 14: 人员数量达标检查**
    - **验证: 需求 8.14**

- [x] 6. 创建预警管理页面
  - 创建 `frontend/alert-management.html` 页面
  - 实现预警列表展示
  - 实现预警级别分类(提醒/即将延期/已延期)
  - 实现预警级别颜色标识(蓝色/黄色/红色)
  - 实现预警详情展示(项目、阶段、内容、时间)
  - 实现预警筛选功能(按项目、类型、级别、状态)
  - 实现"标记已处理"和"忽略"操作
  - 实现预警通知渠道显示(平台消息/雅办公)
  - 实现预警规则配置功能
  - 实现导出预警报告功能
  - 实现预警处理历史记录
  - _需求: 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.7, 9.8, 9.9, 9.10, 9.11, 9.12_

- [ ]* 6.1 编写预警级别分类正确性属性测试
  - **属性 15: 预警级别分类正确性**
  - **验证: 需求 9.2**

- [ ]* 6.2 编写预警通知规则属性测试
  - **属性 16: 预警通知规则**
  - **验证: 需求 9.3, 9.4, 9.5**

- [ ]* 6.3 编写预警状态更新属性测试
  - **属性 17: 预警状态更新**
  - **验证: 需求 9.7**

- [x] 7. 实现语义比对功能
  - 创建 `frontend/semantic-matching.html` 页面
  - 实现语义相似度计算
  - 实现相似度阈值判断(80%)
  - 实现"可能相同"标记显示
  - 实现用户确认功能("是同一交付物"/"不是同一交付物")
  - 实现手动建立映射关系功能
  - 实现映射关系展示
  - 实现导出映射表功能
  - 实现批量导入映射关系功能
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.6, 10.7, 10.8, 10.9, 10.10_

- [ ]* 7.1 编写语义相似度阈值属性测试
  - **属性 18: 语义相似度阈值**
  - **验证: 需求 10.2**

- [ ]* 7.2 编写批量导入映射关系属性测试
  - **属性 19: 批量导入映射关系**
  - **验证: 需求 10.9**

- [x] 8. 创建交互脚本
  - 创建 `frontend/interactions-workflow.js` 文件
  - 实现文档上传交互逻辑
  - 实现文档同步交互逻辑
  - 实现标签页切换逻辑
  - 实现字段编辑交互逻辑
  - 实现合规性检查交互逻辑
  - 实现数据比对交互逻辑
  - 实现预警管理交互逻辑
  - 实现语义比对交互逻辑

- [x] 9. 集成到现有导航系统
  - 在 `frontend/dashboard.html` 中添加新页面入口
  - 在 `frontend/project-detail.html` 中添加新功能入口
  - 更新 `frontend/interactions.js` 中的导航逻辑
  - 确保所有页面的导航栏一致

- [x] 10. 检查点 - 确保所有功能正常工作
  - 所有核心功能已实现并可正常运行
  - 页面间导航流畅
  - 交互逻辑完整

## 注意事项

- 任务标记 `*` 的为可选测试任务,可以根据项目进度决定是否实施
- 所有页面应遵循现有设计系统规范(`.kiro/steering/design-system.md`)
- 使用 Tailwind CSS CDN,保持与现有前端一致
- 所有交互逻辑应在独立的 JavaScript 文件中实现
- 确保所有页面在移动端也能正常显示(响应式设计)
- 属性测试应使用 fast-check 库,每个测试至少运行 100 次迭代

