# 设计文档 - 文档同步功能更新

## 概述

本设计文档描述如何将项目质控助手前端原型中的"文档上传"功能更新为"文档同步"功能。这个变更反映了实际的业务流程:文档不是由用户手动上传,而是从数据中台自动同步过来的。

## 架构

### 当前架构
- 纯静态 HTML 页面
- 使用 Tailwind CSS 进行样式设计
- 交互逻辑在 `interactions.js` 中实现
- 无后端依赖(原型阶段)

### 变更范围
本次变更仅涉及前端展示层的文案和视觉元素更新,不涉及架构变更。

## 组件和接口

### 受影响的页面组件

#### 1. 招标阶段页面 (project-detail-bidding.html)

**快速操作区域**
- 位置: 右侧边栏 "⚡ 快速操作" 部分
- 当前实现: 显示"上传文档"按钮
- 新实现: 显示"同步文档"按钮

**文档齐备性检查区域**
- 位置: 主内容区 "📄 文档齐备性检查" 部分
- 当前实现: 待上传文档显示上传图标和"点击上传"提示
- 新实现: 待同步文档显示同步图标和"点击同步"提示

#### 2. 立项阶段页面 (project-detail-initiation.html)

**快速操作区域**
- 位置: 右侧边栏 "⚡ 快速操作" 部分
- 当前实现: 显示"上传文档"按钮
- 新实现: 显示"同步文档"按钮

#### 3. 项目详情页 (project-detail.html)

**文档列表区域**
- 位置: 主内容区文档列表
- 当前实现: 
  - 已完成文档显示"上传于 YYYY-MM-DD"
  - 待处理文档显示"⏳ 待上传"状态和"上传"按钮
- 新实现:
  - 已完成文档显示"同步于 YYYY-MM-DD | 已从数据中台同步"
  - 待处理文档显示"⏳ 待同步"状态和"同步"按钮

#### 4. 帮助中心 (help-center.html)

**功能说明区域**
- 位置: 帮助文档列表
- 当前实现: "文档上传与解析"
- 新实现: "文档同步与解析"

### 图标更新

**当前上传图标 (SVG)**
```html
<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
          d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
</svg>
```

**新同步图标 (SVG)**
```html
<svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
          d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
</svg>
```

## 数据模型

本次变更不涉及数据模型变更,仅更新展示文案。

## 正确性属性

*属性是一个特征或行为,应该在系统的所有有效执行中保持为真——本质上是关于系统应该做什么的形式化陈述。属性作为人类可读规范和机器可验证正确性保证之间的桥梁。*

### 属性 1: 文案一致性

*对于任何* 项目阶段页面,所有与文档获取相关的文案都应使用"同步"而不是"上传"

**验证: 需求 1.1, 2.1, 3.1**

### 属性 2: 图标一致性

*对于任何* 文档同步功能按钮,都应使用统一的同步图标(循环箭头)而不是上传图标(向上箭头)

**验证: 需求 6.1**

### 属性 3: 状态标识一致性

*对于任何* 已同步的文档,状态说明都应包含"已从数据中台同步"的标识

**验证: 需求 1.3, 2.3, 3.3, 4.1**

### 属性 4: 待处理状态一致性

*对于任何* 待处理的文档,状态标识都应显示"待同步"而不是"待上传"

**验证: 需求 1.4, 2.4, 3.2**

## 错误处理

本次变更为纯前端文案更新,不涉及错误处理逻辑变更。

## 测试策略

### 单元测试
由于这是纯静态 HTML 页面的文案更新,不需要编写自动化单元测试。

### 手动测试
需要进行以下手动测试:

1. **视觉回归测试**
   - 在浏览器中打开每个受影响的页面
   - 验证所有"上传"文案已改为"同步"
   - 验证图标已更新为同步图标
   - 验证状态标识正确显示

2. **一致性测试**
   - 对比所有页面的文档功能区域
   - 确保文案、图标、样式保持一致
   - 确保符合设计系统规范

3. **跨浏览器测试**
   - 在 Chrome、Firefox、Safari 中测试
   - 确保图标和文案正确显示

### 测试清单

**招标阶段页面 (project-detail-bidding.html)**
- [ ] 快速操作区域显示"同步文档"按钮
- [ ] 同步按钮使用同步图标
- [ ] 已同步文档显示"已从数据中台同步"
- [ ] 待同步文档显示"点击同步"提示

**立项阶段页面 (project-detail-initiation.html)**
- [ ] 快速操作区域显示"同步文档"按钮
- [ ] 同步按钮使用同步图标
- [ ] 已同步文档显示"已从数据中台同步"
- [ ] 待同步文档显示"点击同步"提示

**项目详情页 (project-detail.html)**
- [ ] 已完成文档显示"同步于"而不是"上传于"
- [ ] 已完成文档显示"已从数据中台同步"
- [ ] 待处理文档显示"待同步"而不是"待上传"
- [ ] 同步按钮使用同步图标

**帮助中心 (help-center.html)**
- [ ] 功能说明显示"文档同步与解析"

**验收阶段页面 (project-detail-acceptance.html)**
- [ ] 保持现有的"已从数据中台同步"文案(无需修改)

## 实现细节

### 文案映射表

| 原文案 | 新文案 |
|--------|--------|
| 上传文档 | 同步文档 |
| 点击上传 | 点击同步 |
| 待上传 | 待同步 |
| 上传于 YYYY-MM-DD | 同步于 YYYY-MM-DD \| 已从数据中台同步 |
| 文档上传与解析 | 文档同步与解析 |

### 样式保持

所有按钮和状态标识的样式类保持不变,仅更新文本内容和图标 SVG。

### 响应式设计

变更不影响响应式布局,所有页面在不同屏幕尺寸下的表现保持一致。
