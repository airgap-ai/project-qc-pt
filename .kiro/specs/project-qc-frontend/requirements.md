# 需求文档 - 项目质控助手前端界面

## 介绍

本文档定义了项目质控助手（Smart QC Agent）前端界面的功能需求。该系统是一个基于 AI 技术的项目全生命周期合规与风险监控系统，通过对非结构化文档的解析，将"死文档"转化为"活数据"，自动对比计划与执行的偏差，提供即时预警及整改建议。

前端界面需要支持三个核心页面：AI 校对工作台、项目详情与阶段流转页、任务中心。

## 术语表

- **系统（System）**: 项目质控助手前端系统
- **用户（User）**: 使用系统的项目管理人员或质控人员
- **管理员（Admin）**: 系统管理员，拥有特批权限
- **人工在环（HITL）**: Human in the Loop，指需要人工介入校对的流程
- **识别结果（OCR_Result）**: 光学字符识别结果
- **文档（Document）**: 项目文档（立项书、合同、验收单等）
- **阶段（Stage）**: 项目阶段（立项、招标、实施、验收）
- **任务（Task）**: 异步文档解析任务
- **置信度（Confidence_Level）**: AI 识别的置信度水平
- **定位框（Bounding_Box）**: 文档中文字的定位框

## 需求

### 需求 1: 主导航与布局框架

**用户故事:** 作为用户，我想要有一个统一的导航框架来访问系统的各个功能模块，以便在不同页面之间快速切换。

#### 验收标准

1. THE 系统 SHALL 提供顶部导航栏，包含系统 Logo、主菜单和用户信息区域
2. THE 系统 SHALL 在主菜单中提供以下导航项：项目总览、任务中心、规则配置、系统设置
3. WHEN 用户点击"项目总览"菜单项 THEN THE 系统 SHALL 显示所有项目的列表视图
4. WHEN 用户点击某个项目 THEN THE 系统 SHALL 导航到该项目的详情与阶段流转页面
5. WHEN 用户点击"任务中心"菜单项 THEN THE 系统 SHALL 显示任务中心异步处理界面
6. WHEN 用户在任务列表中点击"去校对"按钮 THEN THE 系统 SHALL 导航到 AI 校对工作台界面
7. THE 系统 SHALL 在用户信息区域显示当前登录用户名称和角色
8. THE 系统 SHALL 提供用户下拉菜单，包含个人设置和退出登录选项
9. THE 系统 SHALL 在右上角显示通知图标，并显示未读通知数量徽章
10. WHEN 用户点击通知图标 THEN THE 系统 SHALL 显示通知列表下拉面板
11. THE 系统 SHALL 在侧边栏或面包屑中显示当前页面位置，帮助用户了解所在位置
12. THE 系统 SHALL 在所有页面保持导航栏可见，确保用户随时可以切换页面

### 需求 2: 项目总览仪表板

**用户故事:** 作为项目管理者，我想要在一个仪表板中查看所有项目的整体状态，以便快速识别需要关注的项目。

#### 验收标准

1. THE 系统 SHALL 展示项目卡片网格视图，每个卡片代表一个项目
2. FOR EACH 项目卡片 THE 系统 SHALL 显示：项目名称、当前阶段、状态指示器（绿/黄/红灯）、项目经理
3. WHEN 项目正常进行 THEN THE 系统 SHALL 显示绿色状态指示器
4. WHEN 项目有预警 THEN THE 系统 SHALL 显示黄色状态指示器
5. WHEN 项目严重滞后 THEN THE 系统 SHALL 显示红色状态指示器
6. THE 系统 SHALL 在顶部显示统计卡片，包括：进行中项目数、本月待验收项目数、预警项目数
7. THE 系统 SHALL 提供筛选功能，按状态（全部/正常/预警/滞后）和阶段筛选项目
8. THE 系统 SHALL 提供搜索框，支持按项目名称搜索
9. WHEN 用户点击项目卡片 THEN THE 系统 SHALL 导航到该项目的详情页面
10. THE 系统 SHALL 提供"新建项目"按钮，用于创建新项目

### 需求 3: AI 校对工作台界面

**用户故事:** 作为质控人员，我想要在一个分屏界面中同时查看原始文档和提取的结构化数据，以便快速完成人工校对和补录工作。

#### 验收标准

1. THE 系统 SHALL 展示左右分屏布局，左侧为文档预览区（占 50% 宽度），右侧为结构化数据表单（占 50% 宽度）
2. THE 系统 SHALL 在顶部显示面包屑导航：项目总览 > 项目名称 > 任务中心 > 校对文档
3. WHEN 用户点击面包屑中的链接 THEN THE 系统 SHALL 导航到相应页面
4. WHEN 用户点击"返回"按钮 THEN THE 系统 SHALL 返回到任务中心页面
5. WHEN 用户点击右侧面板中的某个字段 THEN THE 系统 SHALL 在左侧面板中用蓝色定位框高亮显示对应的文本区域，并滚动到可视范围
4. THE 系统 SHALL 在预览区支持 PDF 和图片的缩放、旋转和拖拽操作
5. WHEN 字段置信度高 THEN THE 系统 SHALL 以白色背景和普通文本输入框显示该字段
6. WHEN 字段置信度低或为空 THEN THE 系统 SHALL 以红色边框或浅红色背景显示该字段，并显示"[需确认]"图标
7. THE 系统 SHALL 将只读字段（如上传时间、文件名）标记为禁用状态，显示为灰色背景
8. WHEN 签署日期字段为空 THEN THE 系统 SHALL 强制要求填写，并在填写前阻止保存操作
10. THE 系统 SHALL 在表单底部提供"保存并校验"和"驳回/重新上传"操作按钮
11. WHEN 用户点击"保存并校验"按钮 THEN THE 系统 SHALL 验证所有必填字段，触发规则引擎校验，并返回任务中心
12. WHEN 用户点击"驳回/重新上传"按钮 THEN THE 系统 SHALL 废弃当前文档，并返回任务中心

### 需求 4: 项目详情与阶段流转界面

**用户故事:** 作为项目经理，我想要清晰地看到项目当前处于哪个阶段以及每个阶段的完成状态，以便了解项目进展和风险点。

#### 验收标准

1. THE 系统 SHALL 在顶部显示面包屑导航：项目总览 > 项目名称
2. THE 系统 SHALL 在页面顶部展示项目基本信息卡片，包括项目名称、当前阶段状态和项目经理
3. THE 系统 SHALL 在顶部展示箭头状进度条，显示所有项目阶段：立项 -> 招标 -> 实施 -> 验收
2. WHEN 阶段已完成 THEN THE 系统 SHALL 以绿色显示该阶段，并显示对勾图标
3. WHEN 阶段进行中 THEN THE 系统 SHALL 以蓝色高亮显示该阶段
4. WHEN 阶段因延期或缺少文档而受阻 THEN THE 系统 SHALL 以红色显示该阶段，并显示警告图标
5. WHEN 阶段未开始 THEN THE 系统 SHALL 以灰色显示该阶段
6. THE 系统 SHALL 展示任务卡片，显示当前阶段的必需文档清单
7. FOR EACH 必需文档 THE 系统 SHALL 显示其状态：待上传（灰色虚线框）、解析中（转圈动画）、需补录（红色文字配"去校对"按钮）或已完成（绿色文字配预览/下载选项）
8. WHEN 用户点击文档的"去校对"按钮 THEN THE 系统 SHALL 导航到 AI 校对工作台界面
9. WHEN 用户点击文档的"预览"按钮 THEN THE 系统 SHALL 在新窗口或弹窗中显示文档内容
10. THE 系统 SHALL 展示关键指标看板，显示当前阶段的计划结束日期与实际结束日期对比
11. WHEN 阶段延期 THEN THE 系统 SHALL 以红色文字显示延期天数（如"+5天"）
12. WHERE 用户是管理员 THEN THE 系统 SHALL 在显眼位置显示"强制通过本阶段"按钮
13. WHEN 管理员点击强制通过按钮 THEN THE 系统 SHALL 打开弹窗，要求输入"特批理由"后才允许执行操作
14. WHEN 存在风险或延期 THEN THE 系统 SHALL 展示诊断卡片，包含风险描述和操作按钮（如"下载延期说明函模板"、"发起变更流程"）

### 需求 5: 任务中心异步处理界面

**用户故事:** 作为用户，我想要在上传文档后不必等待解析完成就能继续其他工作，并在解析完成时收到通知，以便提高工作效率。

#### 验收标准

1. THE 系统 SHALL 在顶部显示面包屑导航：项目总览 > 任务中心
2. WHEN 用户上传文档 THEN THE 系统 SHALL 立即返回，允许用户继续工作而不阻塞屏幕
3. THE 系统 SHALL 在右上角显示悬浮通知，显示"正在解析 X 个文档..."
4. WHEN 文档解析完成 THEN THE 系统 SHALL 显示系统通知："文档《文件名》解析完成，请前往核对"
5. WHEN 用户点击通知 THEN THE 系统 SHALL 导航到对应的任务详情或校对页面
6. THE 系统 SHALL 提供任务列表视图，显示所有文档解析任务
7. FOR EACH 列表中的任务 THE 系统 SHALL 显示：文件名、所属项目、上传时间、当前状态和操作按钮
8. WHEN 任务排队中 THEN THE 系统 SHALL 以灰色显示状态为"排队中"
9. WHEN 任务处理中 THEN THE 系统 SHALL 以蓝色显示状态为"OCR 识别中"，并显示带百分比的动态进度条
10. WHEN 任务失败 THEN THE 系统 SHALL 以红色显示状态为"解析失败"，并显示失败原因（如"文件损坏"、"密码保护"）
11. WHEN 任务需要人工校验 THEN THE 系统 SHALL 以橙色显示状态为"待人工校验"，并显示显眼的"去校对"按钮
12. WHEN 用户点击"去校对"按钮 THEN THE 系统 SHALL 导航到 AI 校对工作台界面
13. THE 系统 SHALL 提供标签页筛选：全部、处理中、需人工处理、已完成
14. THE 系统 SHALL 在"需人工处理"标签页上显示徽章计数，显示需要关注的任务数量
15. THE 系统 SHALL 提供搜索功能，按文件名或项目名称筛选任务
16. THE 系统 SHALL 提供"上传新文档"按钮，用于发起新的文档上传
17. WHEN 用户点击任务列表中的项目名称 THEN THE 系统 SHALL 导航到该项目的详情页面

### 需求 6: 响应式布局与交互反馈

**用户故事:** 作为用户，我想要界面能够提供清晰的视觉反馈和流畅的交互体验，以便快速理解系统状态和完成操作。

#### 验收标准

1. THE 系统 SHALL 统一使用颜色编码：绿色表示成功/已完成，蓝色表示进行中，红色表示错误/警告，黄色表示注意，灰色表示待处理/禁用
2. WHEN 用户悬停在交互元素上 THEN THE 系统 SHALL 提供视觉反馈（如背景色变化、阴影）
3. WHEN 用户执行操作 THEN THE 系统 SHALL 提供即时视觉反馈（如按钮状态变化、加载动画）
4. THE 系统 SHALL 统一使用图标增强视觉识别（如对勾表示已完成，警告三角表示错误）
5. THE 系统 SHALL 确保所有文本具有足够的对比度，保证可读性
6. THE 系统 SHALL 在所有页面使用一致的间距和对齐方式
7. THE 系统 SHALL 为状态变化提供平滑的过渡和动画（如进度条动画、通知滑入）
8. THE 系统 SHALL 确保所有交互元素具有清晰的可点击区域和适当的尺寸

### 需求 7: 数据展示与状态管理

**用户故事:** 作为用户，我想要看到准确的项目数据和实时的状态更新，以便做出正确的决策。

#### 验收标准

1. THE 系统 SHALL 显示项目基本信息，包括项目名称、当前阶段和项目经理
2. THE 系统 SHALL 显示资金监控数据，包括合同总额和累计付款百分比，并配有进度条
3. THE 系统 SHALL 显示时间监控数据，包括计划开始日期、计划结束日期和当前延期状态
4. WHEN 显示日期 THEN THE 系统 SHALL 使用统一格式（YYYY-MM-DD）
5. WHEN 显示货币 THEN THE 系统 SHALL 使用统一格式，包含千位分隔符（¥ 1,000,000.00）
6. THE 系统 SHALL 随着后台处理进度实时更新任务状态
7. THE 系统 SHALL 持久化表单中的用户输入，防止数据丢失
8. WHEN 发生验证错误 THEN THE 系统 SHALL 在相关字段附近显示清晰的错误消息
9. THE 系统 SHALL 为长列表提供分页功能，清晰指示当前页和总条目数
10. THE 系统 SHALL 为异步操作显示加载状态，表明系统正在工作

### 需求 8: 规则配置管理界面

**用户故事:** 作为系统管理员，我想要通过可视化界面配置项目模板、阶段定义和校验规则，以便灵活适应不同类型项目的需求而无需修改代码。

#### 验收标准

1. THE 系统 SHALL 提供规则配置管理页面，包含三个标签页：项目模板、阶段配置、校验规则
2. THE 系统 SHALL 在项目模板标签页展示所有已创建的项目模板卡片
3. FOR EACH 项目模板卡片 THE 系统 SHALL 显示：模板名称、启用状态、阶段数量、规则数量、使用项目数量、最后更新时间
4. THE 系统 SHALL 提供"新建项目模板"按钮，用于创建新的项目模板
5. WHEN 用户点击"新建项目模板"按钮 THEN THE 系统 SHALL 打开模态框，要求输入模板名称、类型、阶段数量和描述
6. WHEN 用户提交新建模板表单 THEN THE 系统 SHALL 验证必填字段，创建模板并显示成功提示
7. THE 系统 SHALL 为每个模板卡片提供"编辑"和"复制"操作按钮
8. WHEN 用户点击模板的"编辑"按钮 THEN THE 系统 SHALL 导航到模板编辑页面
9. THE 系统 SHALL 在阶段配置标签页展示当前选中模板的所有阶段列表
10. THE 系统 SHALL 提供模板选择下拉框，允许切换查看不同模板的阶段配置
11. THE 系统 SHALL 提供"添加阶段"按钮，用于为当前模板添加新阶段
12. WHEN 用户点击"添加阶段"按钮 THEN THE 系统 SHALL 打开阶段配置模态框
13. THE 系统 SHALL 在阶段配置模态框中提供以下字段：阶段名称、英文标识、标准周期（天）、超时阈值（天）、前置阶段、触发逻辑、整改方案模板
14. THE 系统 SHALL 支持动态周期配置，允许从文档字段读取周期天数
15. WHEN 用户勾选"启用动态周期"复选框 THEN THE 系统 SHALL 显示来源文档和字段名称输入框
16. WHEN 用户提交阶段配置表单 THEN THE 系统 SHALL 验证必填字段，保存阶段配置并显示成功提示
17. THE 系统 SHALL 为阶段列表中的每个阶段提供"编辑"和"删除"操作按钮
18. WHEN 用户点击阶段的"编辑"按钮 THEN THE 系统 SHALL 打开阶段配置模态框并预填充现有数据
19. THE 系统 SHALL 在校验规则标签页展示两类规则：文档齐备性规则和 AI 内容校验规则
20. THE 系统 SHALL 提供"添加规则"按钮，允许用户选择添加文档规则或 AI 规则
21. WHEN 用户选择添加文档规则 THEN THE 系统 SHALL 打开文档规则配置模态框
22. THE 系统 SHALL 在文档规则模态框中提供以下字段：所属阶段、文档名称、文档类型 ID、是否必需、格式限制、整改方案、关联 AI 规则
23. THE 系统 SHALL 允许为文档规则关联多个 AI 规则（关键词检测、签字检测、章节检测）
24. WHEN 用户选择添加 AI 规则 THEN THE 系统 SHALL 打开 AI 规则配置模态框
25. THE 系统 SHALL 在 AI 规则模态框中提供以下基础字段：规则 ID、规则类型、规则名称、目标文档、预警文案
26. THE 系统 SHALL 支持四种 AI 规则类型：关键词检测、签字检测、章节检测、跨文档比对
27. WHEN 用户选择"关键词检测"类型 THEN THE 系统 SHALL 显示关键词列表和逻辑运算符（OR/AND）字段
28. WHEN 用户选择"签字检测"类型 THEN THE 系统 SHALL 显示最少数量字段
29. WHEN 用户选择"章节检测"类型 THEN THE 系统 SHALL 显示必需章节列表字段
30. WHEN 用户选择"跨文档比对"类型 THEN THE 系统 SHALL 显示来源文档 A/B、字段 A/B 和比对运算符字段
31. THE 系统 SHALL 根据选择的规则类型自动显示/隐藏相关配置字段
32. WHEN 用户提交 AI 规则表单 THEN THE 系统 SHALL 验证所有必填字段和类型特定字段，保存规则并显示成功提示
33. THE 系统 SHALL 为规则列表中的每个规则提供"编辑"和"删除"操作按钮
34. WHEN 用户点击规则的"编辑"按钮 THEN THE 系统 SHALL 打开对应的规则配置模态框并预填充现有数据
35. THE 系统 SHALL 在所有模态框中提供"取消"和"保存"按钮
36. WHEN 用户点击"取消"按钮或模态框外部区域 THEN THE 系统 SHALL 关闭模态框而不保存更改
37. THE 系统 SHALL 在表单提交成功后关闭模态框、重置表单并显示成功提示

### 需求 9: 模板编辑详细配置界面

**用户故事:** 作为系统管理员，我想要在一个集中的页面中编辑项目模板的所有配置，包括基本信息、阶段、文档规则、AI 规则和预警规则，以便全面管理模板配置。

#### 验收标准

1. THE 系统 SHALL 提供模板编辑页面，包含左侧导航和右侧内容区域
2. THE 系统 SHALL 在左侧导航显示五个配置部分：基本信息、阶段配置、文档规则、AI 校验规则、预警规则
3. WHEN 用户点击左侧导航项 THEN THE 系统 SHALL 平滑滚动到对应的配置部分
4. THE 系统 SHALL 在基本信息部分提供以下字段：模板名称、版本号、模板类型、模板描述、启用状态
5. THE 系统 SHALL 在阶段配置部分展示所有阶段的卡片列表
6. FOR EACH 阶段卡片 THE 系统 SHALL 显示：阶段名称、标准周期、超时阈值、前置阶段、触发逻辑、整改方案模板
7. THE 系统 SHALL 为动态周期的阶段显示特殊标识和来源信息
8. THE 系统 SHALL 提供"添加阶段"按钮，允许在模板编辑页面中添加新阶段
9. THE 系统 SHALL 为每个阶段卡片提供"编辑"和"删除"操作按钮
10. THE 系统 SHALL 在文档规则部分按阶段分组展示所有文档规则
11. FOR EACH 文档规则 THE 系统 SHALL 显示：文档名称、文档类型 ID、是否必需、格式限制、关联的 AI 规则、整改方案
12. THE 系统 SHALL 提供"添加文档规则"按钮，允许在模板编辑页面中添加新规则
13. THE 系统 SHALL 在 AI 校验规则部分展示所有 AI 规则的详细配置
14. FOR EACH AI 规则 THE 系统 SHALL 显示：规则 ID、规则类型、目标文档、校验逻辑、预警文案
15. THE 系统 SHALL 为不同类型的 AI 规则使用不同的视觉标识（颜色、图标）
16. THE 系统 SHALL 提供"添加 AI 规则"按钮，允许在模板编辑页面中添加新规则
17. THE 系统 SHALL 在预警规则部分配置延期预警分级（轻度、中度、严重）
18. FOR EACH 预警级别 THE 系统 SHALL 提供以下配置：延期天数阈值、通知对象、冷却期（天）、通知模板
19. THE 系统 SHALL 支持配置合规缺失预警，包括关键文档缺失和签字缺失的预警设置
20. THE 系统 SHALL 支持配置通知渠道，包括系统内通知、邮件、企业微信、钉钉
21. THE 系统 SHALL 在页面顶部提供"预览 JSON"、"导出模板"和"保存模板"操作按钮
22. WHEN 用户点击"预览 JSON"按钮 THEN THE 系统 SHALL 在弹窗中显示当前模板配置的 JSON 格式
23. WHEN 用户点击"导出模板"按钮 THEN THE 系统 SHALL 下载模板配置的 JSON 文件
24. WHEN 用户点击"保存模板"按钮 THEN THE 系统 SHALL 验证所有配置，保存模板并显示成功提示
25. THE 系统 SHALL 在页面底部显示最后保存时间和保存者信息
26. THE 系统 SHALL 在用户离开页面前检测未保存的更改，并提示用户确认

### 需求 10: 不同阶段的项目详情展示

**用户故事:** 作为项目管理者，我想要根据项目当前所处的阶段查看相应的文档清单和 AI 校验结果，以便了解该阶段的具体进展和问题。

#### 验收标准

1. THE 系统 SHALL 根据项目当前阶段展示对应的项目详情页面
2. THE 系统 SHALL 为四个阶段提供专门的详情页面：立项阶段、招标阶段、实施阶段、验收阶段
3. THE 系统 SHALL 在所有阶段详情页面保持统一的页面结构和布局
4. THE 系统 SHALL 在立项阶段详情页展示立项阶段特有的文档清单：立项申请书、预算审批表、可行性研究报告
5. THE 系统 SHALL 在立项阶段详情页展示立项阶段特有的 AI 校验结果：关键词检测（审批结论）、签字检测
6. THE 系统 SHALL 在招标阶段详情页展示招标阶段特有的文档清单：招标文件、投标文件、中标通知书
7. THE 系统 SHALL 在招标阶段详情页展示招标阶段特有的 AI 校验结果：招标文件完整性、截止日期预警、签字检测
8. THE 系统 SHALL 在实施阶段详情页展示实施阶段特有的文档清单：项目合同、进度报告、变更申请
9. THE 系统 SHALL 在实施阶段详情页展示实施阶段特有的 AI 校验结果：合同金额提取、工期计算、变更记录
10. THE 系统 SHALL 在验收阶段详情页展示验收阶段特有的文档清单：验收报告、付款凭证、结算单
11. THE 系统 SHALL 在验收阶段详情页展示验收阶段特有的 AI 校验结果：签字检测、金额一致性、验收结论
12. THE 系统 SHALL 在所有阶段详情页面顶部展示阶段进度条，高亮显示当前阶段
13. THE 系统 SHALL 在阶段进度条中用不同颜色标识阶段状态：已完成（绿色）、进行中（蓝色）、延期（红色）、未开始（灰色）
14. THE 系统 SHALL 在所有阶段详情页面展示关键指标看板，包括阶段进度百分比、计划时间、实际时间、延期天数
15. WHEN 阶段延期 THEN THE 系统 SHALL 在关键指标看板中以红色文字显示延期天数
16. THE 系统 SHALL 在所有阶段详情页面提供快速操作区域，包括上传文档、查看报告、导出数据等操作
17. THE 系统 SHALL 在项目总览仪表板中为不同阶段的项目提供不同的链接，导航到对应阶段的详情页面

### 需求 11: 交互反馈与用户体验优化

**用户故事:** 作为用户，我想要在操作系统时获得即时、清晰的反馈，以便了解操作结果和系统状态。

#### 验收标准

1. THE 系统 SHALL 为所有用户操作提供即时的视觉反馈
2. WHEN 用户提交表单 THEN THE 系统 SHALL 显示 Toast 通知，说明操作结果（成功/失败/警告）
3. THE 系统 SHALL 使用不同颜色的 Toast 通知区分消息类型：成功（绿色）、错误（红色）、警告（黄色）、信息（蓝色）
4. THE 系统 SHALL 在 Toast 通知中显示清晰的消息文本和关闭按钮
5. THE 系统 SHALL 在 3 秒后自动关闭 Toast 通知，除非用户手动关闭
6. WHEN 用户悬停在按钮或链接上 THEN THE 系统 SHALL 改变元素的背景色或显示阴影效果
7. WHEN 用户点击按钮 THEN THE 系统 SHALL 显示按钮按下状态的视觉反馈
8. THE 系统 SHALL 为长时间操作显示加载动画或进度指示器
9. THE 系统 SHALL 在模态框打开和关闭时使用平滑的淡入淡出动画
10. THE 系统 SHALL 在页面滚动到锚点时使用平滑滚动效果
11. THE 系统 SHALL 为表单验证错误提供清晰的错误提示，显示在相关字段附近
12. THE 系统 SHALL 在用户输入时实时移除字段的错误状态
13. THE 系统 SHALL 为必填字段提供清晰的视觉标识（红色星号）
14. THE 系统 SHALL 在用户尝试关闭包含未保存更改的模态框时显示确认对话框
15. THE 系统 SHALL 为所有交互元素提供适当的鼠标指针样式（pointer、default、not-allowed）
16. THE 系统 SHALL 确保所有动画和过渡效果流畅，不影响用户体验
17. THE 系统 SHALL 在移动设备上提供适当的触摸反馈

